!function(){var t={725:function(t,e,s){"use strict";t.exports=s.p+"95994eba59ca29e9f022.png"},158:function(t,e,s){"use strict";t.exports=s.p+"57a23a714087dd0ac056.mp3"},719:function(t,e,s){"use strict";t.exports=s.p+"69db6280f90c428cf74f.png"},74:function(t,e,s){"use strict";t.exports=s.p+"bfbc89e343c10b4cc733.png"},322:function(t,e,s){"use strict";t.exports=s.p+"6e3d4e1babc0cfd76cd1.png"},513:function(t,e,s){"use strict";t.exports=s.p+"40de068d3ddacc3a723d.png"},826:function(t,e,s){"use strict";t.exports=s.p+"414ac05eb2836c1ce7c5.png"},270:function(t,e,s){"use strict";t.exports=s.p+"65535043f736289e3983.png"},757:function(t,e,s){"use strict";t.exports=s.p+"29f1f8b7d3c41450344d.wav"},8:function(t,e,s){"use strict";t.exports=s.p+"933eef88e6d7eebbdb59.png"},491:function(t,e,s){"use strict";t.exports=s.p+"ef79236187cbb337dcef.png"},824:function(t,e,s){"use strict";t.exports=s.p+"306b0d47958fffb04c47.png"},868:function(t,e,s){"use strict";t.exports="\r\n1 General\r\n\r\n1.1 Board\r\n\r\nThe game is played on an n*m board.\r\n\r\n1.2 Players\r\n\r\nUnlike tiles and bubbles, players aren't restricted to certain positions on the board. \r\n\r\nEach player is controlled either by a human player or by an AI.\r\n\r\nThe list below shows the basic movement speed and immune time of each character.\r\n\r\nBOY: 120px/s 1s\r\nGIRL: 90px/s 1.5s\r\nBLUE BOY: 140px/s 0.7s\r\nBLUE GIRL: 105px/s 1.2s\r\n\r\n1.3 Tiles\r\n\r\nEach tile on the board can be empty, have a tree, or have a cactus.\r\n\r\nTrees and cacti are obstacles.\r\n\r\nEmpty tiles can have boxes placed on them. No two boxes share the same tile. Boxes can block player movements but can be destroyed.\r\n\r\n1.4 Bubbles\r\n\r\nBubbles can be placed by players or released from destroyed boxes.\r\n\r\nWhen bubbles explode, certain tiles are affected. The explosion effect will last for 500 milliseconds, while the damage effect is instant.\r\n\r\n1.5 Potions\r\n\r\nSpeed potion can bring you 1.5x movement speed for 10 seconds. Attack potion can make the bubbles you place within the next 10 seconds more powerful.\r\n\r\nPotions may appear above boxes. If so, you need to destroy the box before you can reach the potion.\r\n\r\n2 Game Modes\r\n\r\n2.1 PVP Mode\r\n\r\nPlayer 1 uses WASD to move. Player 2 uses arrows. Player 1 uses Q to place blue bubbles and E to place red bubbles. Player 2 uses N to place blue bubbles and M to place red bubbles.\r\n\r\nPlayer 1 uses A and D to switch when choosing character. Player 2 uses left and right arrow keys.\r\n\r\n2.2 Box Mode\r\n\r\nFirst, you'll enter a scene where you can use A and D to switch your character. When ready, you can click the ready button.\r\n\r\nThe goal is to get as many points as possible by destroying boxes. You'll get 2 points upon destroying a gold box and 1 point upon destroying other types of box.\r\n\r\nIf you are affected by a bubble, you'll lose points according to the damage you take.\r\n\r\n3 About\r\n\r\nThis game is made with Phaser.js, an open-source framework. Repo site: https://github.com/Tom-abc/bubble\r\n"},383:function(t,e,s){t.exports=EventEmitter},569:function(t,e,s){t.exports=Phaser},635:function(t,e,s){"use strict";s.r(e),s.d(e,{Keyboard:function(){return h}});var i=s("569"),a=s.n(i);let r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","UP","DOWN","LEFT","RIGHT","ENTER"];class h{static getKeyboardKeys(t){let e={};return r.forEach(s=>{let i=a.Input.Keyboard.KeyCodes[s];e[s]=t.input.keyboard.addKey(i)}),e}}},955:function(t,e,s){"use strict";s.r(e),new(s("288")).Mgr},6:function(t,e,s){"use strict";s.r(e),s.d(e,{BubbleType:function(){return c},Pivot:function(){return m},BoxEnv:function(){return R},PVPEnv:function(){return C}});var i,a,r,h,n,o,l,d,c,p,u,b,y,m,g=s("569"),f=s.n(g),v=s("383"),w=s.n(v),x=s("288"),k=s("924"),E=s("7"),P=s("635");(i=d||(d={}))[i.EMPTY=0]="EMPTY",i[i.TREE=1]="TREE",i[i.CACTUS=2]="CACTUS",(a=c||(c={}))[a.BLUE=0]="BLUE",a[a.RED=1]="RED",a[a.BLACK=2]="BLACK",a[a.GREEN=3]="GREEN",a[a.PURPLE=4]="PURPLE",(r=p||(p={}))[r.O=0]="O",r[r.RED=1]="RED",r[r.BLACK=2]="BLACK",(h=u||(u={}))[h.O=0]="O",h[h.N=1]="N",h[h.RED=2]="RED",h[h.GREEN=3]="GREEN",h[h.PURPLE=4]="PURPLE",h[h.BLUE=5]="BLUE",h[h.BLACK=6]="BLACK",h[h.SILVER=7]="SILVER",h[h.DARK=8]="DARK",h[h.GOLD=9]="GOLD",h[h.MAN=10]="MAN",(n=b||(b={}))[n.BLUE=0]="BLUE",n[n.RED=1]="RED",n[n.BLACK=2]="BLACK",n[n.GREEN=3]="GREEN",n[n.PURPLE=4]="PURPLE",n[n.MOVE=5]="MOVE",n[n.RELOAD=6]="RELOAD",n[n.NO=7]="NO",(o=y||(y={}))[o.HEAL=0]="HEAL",o[o.ATTACK=1]="ATTACK",o[o.SPEED=2]="SPEED";class S{scene;map;ground;box;constructor(t,e,s){this.scene=t,this.map=t.add.tilemap(void 0,40,40,e,s),this.map.addTilesetImage("block",x.SpriteKey.BLK),this.map.addTilesetImage("box",x.SpriteKey.BOX),this.ground=this.map.createBlankLayer("ground","block"),this.box=this.map.createBlankLayer("box","box")}findTile({x:t,y:e}){let s=this.ground.getTileAtWorldXY(t||0,e||0);if(null==s)throw Error("no tile");return s}reg({x:t,y:e}){let s=this.findTile({x:t,y:e});return this.cent(s)}unit({x:t,y:e}){let s=this.findTile({x:t,y:e});return new f.Math.Vector2(s)}getTile({x:t,y:e}){let s=this.ground.getTileAt(t||0,e||0);if(null==s)throw Error("no tile");return s}cent({x:t,y:e}){let s=this.getTile({x:t,y:e});return new f.Math.Vector2(s.getCenterX(),s.getCenterY())}check(t){return t.x>=0&&t.y>=0&&t.x<this.map.width&&t.y<this.map.height}hasBox(t){return this.box.hasTileAt(t.x,t.y)}}class M{board;sprite;constructor(t,e){this.board=t,this.sprite=e,this.deactivate()}activate(){this.sprite.setActive(!0).setVisible(!0)}deactivate(){this.sprite.setActive(!1).setVisible(!1)}setPosition({x:t,y:e}){this.sprite.setPosition(t,e)}setUnit({x:t,y:e}){this.setPosition(this.board.cent({x:t,y:e}))}setVelocity({x:t,y:e}){this.sprite.setVelocity(t||0,e)}}class U extends M{v;constructor(t,e){super(t,e),this.v=new f.Math.Vector2}setUnit({x:t,y:e}){super.setUnit({x:t,y:e}),this.v=new f.Math.Vector2(t,e)}getUnit(){return this.v.clone()}}class T extends U{type;attack;constructor(t,e){super(t,t.scene.physics.add.sprite(0,0,x.SpriteKey.BUB).setDepth(1)),this.type=e,this.attack=!1}}class B extends U{type;constructor(t,e){super(t,t.scene.physics.add.sprite(0,0,x.SpriteKey.EXPL,e).setDepth(2)),this.type=e,this.sprite.state=e}}class A extends U{type;constructor(t,e){super(t,t.scene.physics.add.sprite(0,0,x.SpriteKey.POTION,e).setDepth(1)),this.type=e,this.sprite.state=e}}(l=m||(m={}))[l.W=0]="W",l[l.S=1]="S",l[l.E=2]="E",l[l.N=3]="N";class V{pivot;bubble;skill}class O extends M{pivot;walking;text;no;blink;input;key;life;bluecd;redcd;greencd;speedtime;attacktime;constructor(t,e,s){super(t,t.scene.physics.add.sprite(0,0,e).setOrigin(.5,.7)),this.pivot=1,this.walking=!1,this.text=t.scene.add.text(0,0,s).setDepth(2).setOrigin(.5,.5).setFontStyle("bold"),this.no=!1,this.input=new V,this.key=e,this.life=0,this.bluecd=0,this.redcd=0,this.greencd=0,this.speedtime=0,this.attacktime=0,this.blink=t.scene.time.addEvent({delay:150,loop:!0,paused:!0,callback:()=>{this.sprite.setVisible(!this.sprite.visible)}})}getBaseVelocity(){return O.getBaseVelocity(this.pivot)}static getBaseVelocity(t){return O.baseVelocity[t].clone()}static baseVelocity={0:new f.Math.Vector2(-1,0),1:new f.Math.Vector2(0,1),2:new f.Math.Vector2(1,0),3:new f.Math.Vector2(0,-1)};update(){this.text.setPosition(this.sprite.x,this.sprite.y+30)}cam(t,e){return this.board.scene.cameras.add(void 0,void 0,t,e).setBounds(0,0,this.board.map.widthInPixels,this.board.map.heightInPixels).startFollow(this.sprite)}start(t){(!this.walking||t!==this.pivot)&&(this.walking=!0,this.pivot=t,this.setVelocity(this.getBaseVelocity().scale(this.getSpeed()).scale(0!=this.speedtime?1.5:1)),this.sprite.play(`${this.key}${this.pivot}`))}stop(){this.walking&&(this.walking=!1,this.setVelocity({x:0,y:0}),this.sprite.stop(),this.sprite.setFrame(this.board.scene.anims.get(`${this.key}${this.pivot}`).getFrameAt(0).frame))}setNo(t){t!=this.no&&(this.no=t,t?this.blink.paused=!1:(this.blink.paused=!0,this.sprite.setVisible(!0)))}getSpeed(){switch(this.key){case x.PlayerKey.BOY:return 120;case x.PlayerKey.GIRL:return 90;case x.PlayerKey.BLUEBOY:return 140;case x.PlayerKey.BLUEGIRL:return 105}return 0}getNo(){switch(this.key){case x.PlayerKey.BOY:return 1e3;case x.PlayerKey.GIRL:return 1500;case x.PlayerKey.BLUEBOY:return 700;case x.PlayerKey.BLUEGIRL:return 1200}}getPosition(){return new f.Math.Vector2(this.sprite.getTopLeft().x+24,this.sprite.getTopLeft().y+50)}destroy(){this.sprite.destroy(),this.text.destroy()}}class L extends w{scenes;constructor(...t){super(),this.scenes=t}pause(){for(let t of this.scenes)k.SceneUtils.pause(t);this.emit("pause")}resume(){for(let t of this.scenes)k.SceneUtils.resume(t);this.emit("resume")}done(t,e){for(let t of(this.cleanUp(),this.scenes))k.SceneUtils.pause(t);this.emit("done",t||this.quitResult(),e||"")}launch(){for(let t of this.scenes)k.SceneUtils.launch(t);this.emit("launch"),this.reset()}remove(){for(let t of this.scenes)k.SceneUtils.remove(t);this.scenes=[]}}class R extends L{main;s;player;board;egroup;score;time;bluecd;redcd;text;timebar;pb;pr;keys;gens;constructor(t,e,s){super(t,e),this.main=t,this.s=e,this.score=0,this.time=0,this.bluecd=0,this.redcd=0,this.gens=0,this.s.myEvents.on("create",()=>{this.s.add.tileSprite(0,0,200,600,x.SpriteKey.GRASS,0).setOrigin(0,0),this.text=this.s.add.text(100,100,"0").setOrigin(.5,.5).setColor("#fff000").setFontSize(20),this.timebar=new E.Bar(this.s),this.timebar.setMax(18e4),this.timebar.setColor(16777215),this.timebar.setPosition(50,200),this.timebar.setLineWidth(2),this.timebar.setSize(100,20),this.timebar.activate(),this.pb=new E.Plate(this.s),this.pb.setColor(5263615),this.pb.setPosition(50,400),this.pb.setSize(25),this.pb.setMax(100),this.pb.activate(),this.pr=new E.Plate(this.s),this.pr.setColor(16711680),this.pr.setPosition(150,400),this.pr.setSize(25),this.pr.setMax(100),this.pr.activate();let t=new E.Button(this.s,()=>{this.pause()});t.defaults(),t.setText("Pause"),t.setPosition(50,300),t.setSize(100,50),t.activate(),this.s.cameras.main.setViewport(600,0,200,600)}),this.main.myEvents.on("create",()=>{this.board=new S(this.main,20,20),this.egroup=this.main.physics.add.group(),this.main.sound.play(x.AudioKey.LOON,{loop:!0}),this.main.scale.resize(800,600),this.board.ground.setCollisionBetween(1,100),this.board.box.setCollisionBetween(0,100),this.board.ground.fill(0,0,0,20,20),this.board.ground.fill(1,0,0,20,1),this.board.ground.fill(1,0,19,20,1),this.board.ground.fill(1,0,0,1,20),this.board.ground.fill(1,19,0,1,20);for(let t=0;t<20;t++){let e=Math.floor(18*Math.random()+1),s=Math.floor(18*Math.random()+1);if(10==e&&10==s){t--;continue}this.board.ground.putTileAt(2,e,s)}this.main.physics.world.on("worldstep",t=>{if(void 0!==this.player.input.pivot?this.player.start(this.player.input.pivot):this.player.stop(),void 0!==this.player.input.bubble){let t=!1;switch(this.player.input.bubble){case 0:if(this.bluecd<100)break;t=!0,this.bluecd=0;break;case 1:if(this.redcd<100)break;t=!0,this.redcd=0}if(t){let t=new T(this.board,this.player.input.bubble);t.setUnit(this.board.unit(this.player.getPosition())),this.start(t,2e3)}this.player.input.bubble=void 0}void 0!==this.player.input.skill&&(this.player.input.skill=void 0)}),this.keys=P.Keyboard.getKeyboardKeys(this.main),this.keys.Q.on("down",()=>{this.player.input.bubble=0}),this.keys.E.on("down",()=>{this.player.input.bubble=1}),this.player=new O(this.board,s,"Player"),this.player.setUnit({x:10,y:10}),this.player.activate(),this.player.sprite.body.setSize(10,10,!1),this.player.sprite.body.setOffset(19,45),this.main.physics.add.collider(this.player.sprite,this.board.box),this.main.physics.add.collider(this.player.sprite,this.board.ground),this.gens=3,this.gen(),this.main.cameras.addExisting(this.player.cam(600,600),!0)}),this.main.myEvents.on("update",(t,e)=>{if(this.time=Math.max(0,this.time-e),this.timebar.setCur(this.time),this.bluecd=Math.min(100,this.bluecd+.05*e),this.pb.setCur(this.bluecd),this.redcd=Math.min(100,this.redcd+.04*e),this.pr.setCur(this.redcd),0==this.timebar.cur){this.done({score:this.score},`Score: ${this.score}`);return}this.player.update(),this.keys.A.isDown?this.player.input.pivot=0:this.keys.D.isDown?this.player.input.pivot=2:this.keys.W.isDown?this.player.input.pivot=3:this.keys.S.isDown?this.player.input.pivot=1:this.player.input.pivot=void 0,this.main.physics.overlap(this.player.sprite,this.egroup,(t,e)=>{if(!this.player.no)switch(this.player.setNo(!0),this.main.time.addEvent({delay:1e3,callback:()=>{this.player.setNo(!1)}}),e.state){case 0:this.upd(-1);break;case 1:this.upd(-2);break;case 2:this.upd(-3)}});let s=this.board.box;this.main.physics.overlap(s,this.egroup,(t,e)=>{switch(e.index){case 0:s.putTileAt(-1,e.x,e.y),this.upd(1);break;case 1:0===t.state?s.putTileAt(0,e.x,e.y):(s.putTileAt(-1,e.x,e.y),this.upd(1));break;case 7:0===t.state?s.putTileAt(1,e.x,e.y):1===t.state?s.putTileAt(0,e.x,e.y):(s.putTileAt(-1,e.x,e.y),this.upd(1));break;case 5:s.putTileAt(-1,e.x,e.y),this.upd(1);let i=new T(this.board,0);i.setUnit(e),this.start(i,2e3);break;case 2:s.putTileAt(-1,e.x,e.y),this.upd(1);let a=new T(this.board,1);a.setUnit(e),this.start(a,2e3);break;case 6:s.putTileAt(-1,e.x,e.y),this.upd(1);let r=new T(this.board,2);r.setUnit(e),this.start(r,2e3);break;case 3:s.putTileAt(-1,e.x,e.y),this.upd(1);let h=new T(this.board,3);h.setUnit(e),this.start(h,2e3);break;case 4:s.putTileAt(-1,e.x,e.y),this.upd(1);let n=new T(this.board,4);n.setUnit(e),this.start(n,2e3);break;case 8:(1===t.state||2===t.state)&&(s.putTileAt(-1,e.x,e.y),this.upd(1));break;case 9:s.putTileAt(-1,e.x,e.y),this.upd(2)}}),this.egroup.clear()}),this.launch()}quitResult(){return{score:this.score}}upd(t){this.text.setText((this.score+=t).toString())}start(t,e){t.activate(),t.sprite.play(`${x.SpriteKey.BUB}${t.type}`),this.board.scene.time.addEvent({delay:e,callback:()=>{this.pop(t),t.sprite.destroy()}})}pop(t){switch(this.main.sound.play(x.AudioKey.EXPLO),t.type){case 0:for(let e=0;e<=2;e++)k.IterateUtils.iterateX(e,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,0);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 1:for(let e=0;e<=1;e++)k.IterateUtils.iterateX(e,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,1);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});k.IterateUtils.iterateH(1,1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,0);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 3:for(let e=0;e<this.board.map.width;e++){let s=new B(this.board,0);this.egroup.add(s.sprite),s.setUnit(new f.Math.Vector2(e,t.getUnit().y)),s.activate(),this.main.time.addEvent({delay:500,callback:()=>{s.sprite.destroy()}})}for(let e=0;e<this.board.map.height;e++){if(e==t.getUnit().y)continue;let s=new B(this.board,0);this.egroup.add(s.sprite),s.setUnit(new f.Math.Vector2(t.getUnit().x,e)),s.activate(),this.main.time.addEvent({delay:500,callback:()=>{s.sprite.destroy()}})}break;case 2:k.IterateUtils.iterateX(1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,2);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 4:k.IterateUtils.iterateO(1,1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s)||!this.board.hasBox(s))return;let i=new B(this.board,1);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})})}}gen(){this.gens++;for(let t=0;t<this.board.map.width;t++)for(let e=0;e<this.board.map.height;e++){if(this.player.getPosition().distance(this.board.cent({x:t,y:e}))<2*this.board.map.tileWidth)continue;let s=this.board.ground.getTileAt(t,e,!0).index;if(0!=s||this.board.hasBox(new f.Math.Vector2(t,e))||Math.random()<4/(this.gens+10))continue;let i=[Math.max(0,.5*(this.gens-3)),Math.max(0,.1*(this.gens-2)),Math.max(0,.3*(this.gens-2)),.05*(this.gens-1),.05*(this.gens-1),.1*this.gens,.1*this.gens,this.gens,Math.sqrt(this.gens)],a=[7,9,8,4,3,6,5,1,0],r=Math.random()*i.reduce((t,e)=>t+e),h=0;for(let s=0;s<9;s++)if(r<(h+=i[s])){this.board.box.putTileAt(a[s],t,e,!0);break}}}reset(){this.score=0,this.time=18e4,this.bluecd=0,this.redcd=0,this.gens=0}cleanUp(){this.main.sound.stopAll()}}class C extends L{main;s;player1;player2;board;egroup;pgroup;ptngroup;time;text;timebar;hp;hp2;pb;pr;pb2;pr2;keys;gens;players;newi;norm;constructor(t,e,s,i){super(t,e),this.main=t,this.s=e,this.time=0,this.gens=0,this.players=new Map,this.newi=0,this.norm=!0,this.s.myEvents.on("create",()=>{this.s.add.tileSprite(0,0,200,600,x.SpriteKey.GRASS,0).setOrigin(0,0),this.s.add.tileSprite(200,0,200,600,x.SpriteKey.GRASS,2).setOrigin(0,0),this.timebar=new E.Bar(this.s),this.timebar.setMax(12e4),this.timebar.setColor(16777215),this.timebar.setPosition(50,200),this.timebar.setLineWidth(2),this.timebar.setSize(300,20),this.timebar.activate(),this.hp=new E.Bar(this.s),this.hp.setMax(5),this.hp.setCur(5),this.hp.setColor(65280),this.hp.setPosition(50,250),this.hp.setLineWidth(2),this.hp.setSize(100,20),this.hp.activate(),this.hp2=new E.Bar(this.s),this.hp2.setMax(5),this.hp2.setCur(5),this.hp2.setColor(65280),this.hp2.setPosition(250,250),this.hp2.setLineWidth(2),this.hp2.setSize(100,20),this.hp2.activate(),this.pb=new E.Plate(this.s),this.pb.setColor(5263615),this.pb.setPosition(50,400),this.pb.setSize(25),this.pb.setMax(100),this.pb.activate(),this.pr=new E.Plate(this.s),this.pr.setColor(16711680),this.pr.setPosition(150,400),this.pr.setSize(25),this.pr.setMax(100),this.pr.activate(),this.pb2=new E.Plate(this.s),this.pb2.setColor(5263615),this.pb2.setPosition(250,400),this.pb2.setSize(25),this.pb2.setMax(100),this.pb2.activate(),this.pr2=new E.Plate(this.s),this.pr2.setColor(16711680),this.pr2.setPosition(350,400),this.pr2.setSize(25),this.pr2.setMax(100),this.pr2.activate();let t=new E.Button(this.s,()=>{this.pause()});t.defaults(),t.setText("Pause"),t.setPosition(100,50),t.setSize(200,100),t.activate(),this.s.cameras.main.setViewport(500,0,400,600)}),this.main.myEvents.on("create",()=>{this.board=new S(this.main,20,20),this.egroup=this.main.physics.add.group(),this.pgroup=this.main.physics.add.group(),this.ptngroup=this.main.physics.add.group(),this.main.sound.play(x.AudioKey.LOON,{loop:!0}),this.main.time.addEvent({delay:1e4,callback:()=>{this.land()},loop:!0}),this.main.time.addEvent({delay:3e4,callback:()=>{this.gen()},loop:!0}),this.main.time.addEvent({delay:5e3,loop:!0,callback:()=>{Math.random()>.5?this.landPotion(2):this.landPotion(1)}}),this.main.scale.resize(1400,600),this.board.ground.setCollisionBetween(1,100),this.board.box.setCollisionBetween(0,100),this.board.ground.fill(0,0,0,20,20),this.board.ground.fill(1,0,0,20,1),this.board.ground.fill(1,0,19,20,1),this.board.ground.fill(1,0,0,1,20),this.board.ground.fill(1,19,0,1,20);for(let t=0;t<20;t++){let e=Math.floor(18*Math.random()+1),s=Math.floor(18*Math.random()+1);if(7==e&&7==s||14==e&&14==s){t--;continue}this.board.ground.putTileAt(2,e,s)}this.main.physics.world.on("worldstep",t=>{for(let t of this.players.values()){if(void 0!==t.input.pivot?t.start(t.input.pivot):t.stop(),void 0!==t.input.bubble){let e=!1;switch(t.input.bubble){case 0:if(t.bluecd<100)break;e=!0,t.bluecd=0;break;case 1:if(t.redcd<100)break;e=!0,t.redcd=0;break;case 3:if(t.greencd<100)break;e=!0,t.greencd=0}if(e){let e=new T(this.board,t.input.bubble);0!=t.attacktime&&(e.attack=!0),e.setUnit(this.board.unit(t.getPosition())),this.start(e,2e3)}t.input.bubble=void 0}void 0!==t.input.skill&&(t.input.skill=void 0)}}),this.keys=P.Keyboard.getKeyboardKeys(this.main),this.keys.Q.on("down",()=>{this.player1.input.bubble=0}),this.keys.E.on("down",()=>{this.player1.input.bubble=1}),this.keys.N.on("down",()=>{this.player2.input.bubble=0}),this.keys.M.on("down",()=>{this.player2.input.bubble=1}),this.player1=new O(this.board,s,"Player1"),this.player1.setUnit({x:7,y:7}),this.player1.activate(),this.player1.sprite.body.setSize(10,10,!1),this.player1.sprite.body.setOffset(19,45),this.player2=new O(this.board,i,"Player2"),this.player2.setUnit({x:14,y:14}),this.player2.activate(),this.player2.sprite.body.setSize(10,10,!1),this.player2.sprite.body.setOffset(19,45),this.player1.life=this.player2.life=5,this.record(this.player1),this.record(this.player2),this.pgroup.add(this.player1.sprite),this.pgroup.add(this.player2.sprite),this.main.physics.add.collider(this.pgroup,this.board.box),this.main.physics.add.collider(this.pgroup,this.board.ground),this.gen(),this.main.cameras.remove(this.main.cameras.main),this.player1.cam(500,600).setViewport(0,0,500,600),this.player2.cam(500,600).setViewport(900,0,500,600)}),this.main.myEvents.on("update",(t,e)=>{for(let t of(this.time=Math.max(0,this.time-e),this.timebar.setCur(this.time),this.norm&&0==this.time&&(this.norm=!1,this.main.time.addEvent({delay:5e3,loop:!0,callback:()=>{this.land()}})),this.players.values()))t.bluecd=Math.min(100,t.bluecd+.05*e),t.redcd=Math.min(100,t.redcd+.04*e),t.greencd=Math.min(100,t.greencd+.02*e),t.speedtime=Math.max(0,t.speedtime-e),t.attacktime=Math.max(0,t.attacktime-e),t===this.player1?(this.pb.setCur(t.bluecd),this.pr.setCur(t.redcd)):t===this.player2&&(this.pb2.setCur(t.bluecd),this.pr2.setCur(t.redcd)),t.update();for(let t of(this.keys.A.isDown?this.player1.input.pivot=0:this.keys.D.isDown?this.player1.input.pivot=2:this.keys.W.isDown?this.player1.input.pivot=3:this.keys.S.isDown?this.player1.input.pivot=1:this.player1.input.pivot=void 0,this.keys.UP.isDown?this.player2.input.pivot=3:this.keys.DOWN.isDown?this.player2.input.pivot=1:this.keys.LEFT.isDown?this.player2.input.pivot=0:this.keys.RIGHT.isDown?this.player2.input.pivot=2:this.player2.input.pivot=void 0,this.players.values()))if(t!==this.player1&&t!==this.player2){if(.04>Math.random()){let e;do e=Math.floor(4*Math.random());while(e==t.pivot);t.input.pivot=e}100==t.bluecd?t.input.bubble=0:100==t.redcd?t.input.bubble=1:100==t.greencd&&(t.input.bubble=3)}this.main.physics.overlap(this.pgroup,this.egroup,(t,e)=>{let s=this.getPlayer(t);if(!s.no){switch(s.setNo(!0),this.main.time.addEvent({delay:1e3,callback:()=>{s.setNo(!1)}}),e.state){case 0:s.life--;break;case 1:s.life-=2;break;case 2:s.life-=3}s===this.player1?this.hp.setCur(s.life):s===this.player2&&this.hp2.setCur(s.life),s.life<=0&&(this.players.delete(t.state),s.destroy(),s===this.player1?this.done({winner:"Player2"},"Player2 wins!"):s===this.player2&&this.done({winner:"Player1"},"Player1 wins!"))}});let s=this.board.box;this.main.physics.overlap(s,this.egroup,(t,e)=>{switch(e.index){case 0:case 9:s.putTileAt(-1,e.x,e.y);break;case 1:0===t.state?s.putTileAt(0,e.x,e.y):s.putTileAt(-1,e.x,e.y);break;case 7:0===t.state?s.putTileAt(1,e.x,e.y):1===t.state?s.putTileAt(0,e.x,e.y):s.putTileAt(-1,e.x,e.y);break;case 5:s.putTileAt(-1,e.x,e.y);let i=new T(this.board,0);i.setUnit(e),this.start(i,2e3);break;case 2:s.putTileAt(-1,e.x,e.y);let a=new T(this.board,1);a.setUnit(e),this.start(a,2e3);break;case 6:s.putTileAt(-1,e.x,e.y);let r=new T(this.board,2);r.setUnit(e),this.start(r,2e3);break;case 3:s.putTileAt(-1,e.x,e.y);let h=new T(this.board,3);h.setUnit(e),this.start(h,2e3);break;case 4:s.putTileAt(-1,e.x,e.y);let n=new T(this.board,4);n.setUnit(e),this.start(n,2e3);break;case 8:(1===t.state||2===t.state)&&s.putTileAt(-1,e.x,e.y);break;case 10:s.putTileAt(-1,e.x,e.y);let o=new O(this.board,x.PlayerKey.BOY,"Bot");o.setUnit(e),o.activate(),o.sprite.body.setSize(10,10,!1),o.sprite.body.setOffset(19,45),o.life=10,this.pgroup.add(o.sprite),this.record(o)}}),this.main.physics.overlap(this.pgroup,this.ptngroup,(t,e)=>{let s=this.getPlayer(t);switch(e.state){case 2:s.speedtime=1e4;break;case 1:s.attacktime=1e4}e.destroy()}),this.egroup.clear()}),this.launch()}start(t,e){t.activate(),t.sprite.play(`${x.SpriteKey.BUB}${t.type}`),this.board.scene.time.addEvent({delay:e,callback:()=>{this.pop(t),t.sprite.destroy()}})}pop(t){switch(this.main.sound.play("explode"),t.type){case 0:for(let e=0;e<=(t.attack?3:2);e++)k.IterateUtils.iterateX(e,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,0);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 1:if(t.attack){k.IterateUtils.iterateO(1,1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,1);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})}),k.IterateUtils.iterateH(2,0,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,0);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break}for(let e=0;e<=1;e++)k.IterateUtils.iterateX(e,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,1);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});k.IterateUtils.iterateH(1,1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,0);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 3:for(let e=0;e<this.board.map.width;e++){let s=new B(this.board,0);this.egroup.add(s.sprite),s.setUnit(new f.Math.Vector2(e,t.getUnit().y)),s.activate(),this.main.time.addEvent({delay:500,callback:()=>{s.sprite.destroy()}})}for(let e=0;e<this.board.map.height;e++){if(e==t.getUnit().y)continue;let s=new B(this.board,0);this.egroup.add(s.sprite),s.setUnit(new f.Math.Vector2(t.getUnit().x,e)),s.activate(),this.main.time.addEvent({delay:500,callback:()=>{s.sprite.destroy()}})}break;case 2:k.IterateUtils.iterateX(1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s))return;let i=new B(this.board,2);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})});break;case 4:k.IterateUtils.iterateO(1,1,e=>{let s=t.getUnit().add(e);if(!this.board.check(s)||!this.board.hasBox(s))return;let i=new B(this.board,1);this.egroup.add(i.sprite),i.setUnit(s),i.activate(),this.main.time.addEvent({delay:500,callback:()=>{i.sprite.destroy()}})})}}gen(){this.gens++;for(let t=0;t<this.board.map.width;t++)for(let e=0;e<this.board.map.height;e++){if(!this.safe({x:t,y:e}))continue;let s=this.board.ground.getTileAt(t,e,!0).index;if(0!=s||this.board.hasBox(new f.Math.Vector2(t,e))||Math.random()<4/(this.gens+10))continue;let i=[.1*this.gens,1,0,5,1,.5*Math.sqrt(this.gens),1,2,Math.sqrt(this.gens),6,3],a=[10,7,9,8,4,3,6,2,5,1,0],r=Math.random()*i.reduce((t,e)=>t+e),h=0;for(let s=0;s<11;s++)if(r<(h+=i[s])){this.board.box.putTileAt(a[s],t,e,!0);break}}}record(t){this.players.set(++this.newi,t),t.sprite.state=this.newi}getPlayer(t){let e=this.players.get(t.state);if(void 0===e)throw Error("Player not found");return e}quitResult(){return{winner:"None"}}reset(){this.time=12e4,this.newi=0,this.players.clear(),this.norm=!0}cleanUp(){this.main.sound.stopAll()}land(){let t,e;do t=Math.floor(Math.random()*this.board.map.width),e=Math.floor(Math.random()*this.board.map.height);while(0!=this.board.ground.getTileAt(t,e).index||this.board.hasBox(new f.Math.Vector2(t,e)));let s=new O(this.board,x.PlayerKey.BOY,"Bot");return s.setUnit(new f.Math.Vector2(t,e)),s.activate(),s.sprite.body.setSize(10,10,!1),s.sprite.body.setOffset(19,45),s.life=10,this.pgroup.add(s.sprite),this.record(s),s}landPotion(t){let e,s;do e=Math.floor(Math.random()*this.board.map.width),s=Math.floor(Math.random()*this.board.map.height);while(0!=this.board.ground.getTileAt(e,s).index||!this.safe({x:e,y:s}));let i=new A(this.board,t);return i.setUnit(new f.Math.Vector2(e,s)),i.activate(),this.ptngroup.add(i.sprite),i}safe({x:t,y:e}){for(let s of this.players.values())if(s.getPosition().distance(this.board.cent({x:t,y:e}))<2*this.board.map.tileWidth)return!1;return!0}}},288:function(t,e,s){"use strict";s.r(e),s.d(e,{SpriteKey:function(){return h},AudioKey:function(){return n},PlayerKey:function(){return o},Mgr:function(){return K}});var i,a,r,h,n,o,l=s("569"),d=s.n(l),c=s("383"),p=s.n(c),u=s("6"),b=s("7"),y=s("924"),m=s("635"),g=s("826"),f=s("322"),v=s("8"),w=s("513"),x=s("491"),k=s("719"),E=s("270"),P=s("74"),S=s("824"),M=s("158"),U=s("757"),T=s("725"),B=s("868");(i=h||(h={})).GRASS="grass",i.BLK="blk",i.BOX="box",i.EXPL="expl",i.BUB="bub",i.POTION="potion",(a=n||(n={})).LOON="bgm",a.EXPLO="explode",(r=o||(o={})).BOY="boy",r.BLUEBOY="blueboy",r.GIRL="girl",r.BLUEGIRL="bluegirl";class A extends d.Scene{myEvents;rect;constructor(t){super(t),this.myEvents=new p,this.rect=new d.Geom.Rectangle}init(){this.cameras.main.setViewport(this.rect.x,this.rect.y,this.rect.width,this.rect.height)}activate(){y.SceneUtils.launch(this),this.scene.setVisible(!0),this.scene.bringToTop(this)}deactivate(){y.SceneUtils.shutdown(this),this.scene.setVisible(!1),this.scene.sendToBack(this)}}class V extends A{text;init(){super.init();let t=(this.game.canvas.width-400)/2,e=(this.game.canvas.height-450)/2;this.cameras.main.setViewport(t,e,400,450),this.cameras.main.setBackgroundColor("rgba(255,0,0,0.5)")}create(){this.add.text(200,100,"GAME OVER").setOrigin(.5,.5).setFontSize(30),this.add.text(200,200,this.text).setOrigin(.5,.5);let t=new b.Button(this,()=>{this.myEvents.emit("main")});t.defaults(),t.setText("Main Menu"),t.setPosition(100,250),t.setSize(200,100),t.setDepth(1),t.activate()}}class O extends A{un=!1;init(){super.init(),this.scale.resize(800,800)}preload(){if(this.un)return;let t=new b.Bar(this),e=(this.game.canvas.width-200)/2,s=(this.game.canvas.height-20)/2;t.setColor(16777215),t.setSize(200,20),t.setPosition(e,s),t.setLineWidth(5),t.activate(),this.load.on("progress",e=>{t.setCur(e)}),this.load.on("complete",()=>{t.destroy()}),this.load.spritesheet("bub",g,{frameWidth:46,frameHeight:46}),this.load.spritesheet("boy",f,{frameWidth:48,frameHeight:60}),this.load.spritesheet("girl",v,{frameWidth:48,frameHeight:60}),this.load.spritesheet("blueboy",w,{frameWidth:48,frameHeight:60}),this.load.spritesheet("bluegirl",x,{frameWidth:48,frameHeight:60}),this.load.spritesheet("blk",k,{frameWidth:40,frameHeight:40}),this.load.spritesheet("expl",E,{frameWidth:40,frameHeight:40}),this.load.spritesheet("box",P,{frameWidth:40,frameHeight:40}),this.load.spritesheet("potion",S,{frameWidth:33,frameHeight:40}),this.load.audio("bgm",M),this.load.audio("explode",U),this.load.spritesheet("grass",T,{frameWidth:384,frameHeight:64})}create(){if(!this.un){this.un=!0;let t=[u.BubbleType.BLUE,u.BubbleType.RED,u.BubbleType.BLACK,u.BubbleType.GREEN,u.BubbleType.PURPLE];for(let e=0;e<t.length;e++)this.anims.create({key:`bub${t[e]}`,frames:this.anims.generateFrameNumbers("bub",{start:6*e,end:6*e+5}),frameRate:6,repeat:-1});let e=[u.Pivot.S,u.Pivot.W,u.Pivot.E,u.Pivot.N],s=["boy","girl","blueboy","bluegirl"];for(let t=0;t<s.length;t++)for(let i=0;i<e.length;i++)this.anims.create({key:`${s[t]}${e[i]}`,frames:this.anims.generateFrameNumbers(s[t],{start:4*i,end:4*i+3}),frameRate:6,repeat:-1});this.sound.add("bgm"),this.sound.add("explode")}this.add.tileSprite(0,0,800,800,"grass",0).setOrigin(0,0),this.add.text(400,200,"Bubble").setOrigin(.5,.5).setFontSize(40).setColor("#ff0000");let t=new b.Button(this,()=>{this.myEvents.emit("box")});t.defaults(),t.setText("Box"),t.setPosition(300,350),t.setSize(200,70),t.activate();let e=new b.Button(this,()=>{this.myEvents.emit("pvp")});e.defaults(),e.setText("PVP"),e.setPosition(300,430),e.setSize(200,70),e.activate();let s=new b.Button(this,()=>{this.myEvents.emit("help")});s.defaults(),s.setText("Help"),s.setPosition(300,510),s.setSize(200,100),s.activate()}}class L extends A{init(){super.init(),this.cameras.main.setBackgroundColor("rgba(20,20,20,0.7)")}create(){this.add.text(200,100,"PAUSED").setOrigin(.5,.5).setFontSize(30);let t=new b.Button(this,()=>{this.myEvents.emit("resume")});t.defaults(),t.setText("Resume"),t.setPosition(150,180),t.setSize(100,50),t.setDepth(1),t.activate();let e=new b.Button(this,()=>{this.myEvents.emit("restart")});e.defaults(),e.setText("Restart"),e.setPosition(150,240),e.setSize(100,50),e.setDepth(1),e.activate();let s=new b.Button(this,()=>{this.myEvents.emit("main")});s.defaults(),s.setText("Main Menu"),s.setPosition(150,300),s.setSize(100,50),s.setDepth(1),s.activate()}show(){this.activate();let t=(this.scale.gameSize.width-400)/2,e=(this.scale.gameSize.height-400)/2;this.cameras.main.setViewport(t,e,400,400)}}class R extends A{create(){this.add.tileSprite(0,0,800,800,"grass").setOrigin(0,0);let t=this.add.rectangle(100,100,600,400).setOrigin(0,0).setStrokeStyle(2,8947848).setInteractive();this.add.text(400,50,"HELP").setOrigin(.5,.5).setFontSize(30);let e=this.add.text(400,100,B).setOrigin(.5,0).setFontSize(20).setCrop(0,0,600,400);e.setWordWrapWidth(600),t.on("wheel",(t,s,i,a)=>{e.setPosition(e.x,d.Math.Clamp(e.y-i,500-e.height,100)),e.setCrop(0,100-e.y,600,400)});let s=new b.Button(this,()=>{this.myEvents.emit("main")});s.defaults(),s.setText("Main Menu"),s.setPosition(300,600),s.setSize(200,100),s.activate()}}class C extends A{static keys=["boy","girl","blueboy","bluegirl"];i;sprite;prv;nxt;l;r;blink;done;constructor(t,e){super(`vs${1e5*Math.random()}`),this.i=0,this.l=t,this.r=e,this.done=!1}create(){this.add.tileSprite(0,0,400,600,"grass",1).setOrigin(0,0),this.sprite=this.add.sprite(200,300,"boy",0);let t=m.Keyboard.getKeyboardKeys(this);this.prv=t[this.l],this.nxt=t[this.r];let e=new b.Button(this,()=>{this.done=!0,this.blink.paused=!0,this.sprite.setVisible(!0),y.SceneUtils.pause(this),this.myEvents.emit("done",C.keys[this.i])});e.defaults(),e.setText("Ready"),e.setPosition(100,100),e.setSize(200,100),e.activate(),this.blink=this.time.addEvent({delay:200,loop:!0,callback:()=>{this.sprite.setVisible(!this.sprite.visible)}}),this.nxt.on("down",()=>{this.i=(this.i+1)%C.keys.length,this.sprite.setTexture(C.keys[this.i],0)}),this.prv.on("down",()=>{this.i=(this.i-1+C.keys.length)%C.keys.length,this.sprite.setTexture(C.keys[this.i],0)})}ready(){return this.done?Promise.resolve(C.keys[this.i]):new Promise(t=>{this.myEvents.once("done",e=>{t(e)})})}}class D extends d.Scene{myEvents;constructor(t){super(t),this.myEvents=new p}init(){this.myEvents.emit("init")}preload(){this.myEvents.emit("preload")}create(){this.myEvents.emit("create")}update(t,e){this.myEvents.emit("update",t,e)}}class K{start;pause;help;gameover;env;game;constructor(){this.start=new O("start"),this.pause=new L("pause"),this.help=new R("help"),this.gameover=new V("gameover"),this.start.rect=new d.Geom.Rectangle(0,0,800,800),this.help.rect=new d.Geom.Rectangle(0,0,800,800),this.start.myEvents.on("box",async()=>{this.start.deactivate();let t=new C("A","D");t.rect=new d.Geom.Rectangle(0,0,400,800),this.start.scale.resize(400,600),this.game.scene.add("choose",t,!0);let e=await t.ready();y.SceneUtils.remove(t);let s=new D("main");this.game.scene.add("main",s);let i=new D("s");this.game.scene.add("s",i),this.env=new u.BoxEnv(s,i,e),this.env.on("done",(t,e)=>{this.gameover.text=e,y.SceneUtils.launch(this.gameover)}),this.pause.rect=new d.Geom.Rectangle(200,100,400,400),this.env.on("pause",()=>{this.pause.activate()})}),this.start.myEvents.on("pvp",async()=>{this.start.deactivate();let t=new C("A","D");t.rect=new d.Geom.Rectangle(0,0,400,600),this.start.scale.resize(800,600),this.game.scene.add("choose",t,!0);let e=new C("LEFT","RIGHT");e.rect=new d.Geom.Rectangle(400,0,400,600),this.game.scene.add("choose2",e,!0);let s=await t.ready(),i=await e.ready();y.SceneUtils.remove(t),y.SceneUtils.remove(e);let a=new D("main");this.game.scene.add("main",a);let r=new D("s");this.game.scene.add("s",r),this.env=new u.PVPEnv(a,r,s,i),this.env.on("done",(t,e)=>{this.gameover.text=e,y.SceneUtils.launch(this.gameover)}),this.pause.rect=new d.Geom.Rectangle(500,100,400,400),this.env.on("pause",()=>{this.pause.activate()})}),this.start.myEvents.on("help",()=>{this.help.activate(),this.start.deactivate()}),this.pause.myEvents.on("main",()=>{this.env.removeAllListeners(),this.env.done(),this.env.remove(),this.start.activate(),this.pause.deactivate()}),this.pause.myEvents.on("resume",()=>{this.env.resume(),this.pause.deactivate()}),this.pause.myEvents.on("restart",()=>{this.env.cleanUp(),this.pause.deactivate(),this.env.launch()}),this.help.myEvents.on("main",()=>{this.start.activate(),this.help.deactivate()}),this.gameover.myEvents.on("main",()=>{this.env.remove(),this.start.activate(),this.gameover.deactivate()}),this.game=new d.Game({type:d.AUTO,width:800,height:800,scene:[this.start,this.pause,this.help,this.gameover],physics:{default:"arcade",arcade:{debug:!1}},scale:{mode:d.Scale.NONE}})}}},7:function(t,e,s){"use strict";s.r(e),s.d(e,{Bar:function(){return a},Plate:function(){return r},Button:function(){return h}});class i{scene;constructor(t){this.scene=t}}class a extends i{border;fill;max;cur;constructor(t){super(t),this.border=t.add.rectangle().setScrollFactor(0).setOrigin(0,0),this.fill=t.add.rectangle().setScrollFactor(0).setOrigin(0,0),this.deactivate(),this.max=1,this.cur=0,this.setDepth(0)}setPosition(t,e){this.border.setPosition(t,e),this.fill.setPosition(t,e)}setSize(t,e){this.border.setSize(t,e),this.fill.setSize(t,e),this.upd()}setColor(t){this.border.setStrokeStyle(this.border.lineWidth,t),this.fill.setFillStyle(t)}setBackColor(t,e){this.border.setFillStyle(t,e)}setLineWidth(t){this.border.setStrokeStyle(t,this.border.strokeColor)}setDepth(t){this.border.setDepth(t),this.fill.setDepth(t+1)}activate(){this.border.setActive(!0).setVisible(!0),this.fill.setActive(!0).setVisible(!0)}deactivate(){this.border.setActive(!1).setVisible(!1),this.fill.setActive(!1).setVisible(!1)}setMax(t){this.max=t,this.upd()}setCur(t){this.cur=t,this.upd()}destroy(){this.border.destroy(),this.fill.destroy()}upd(){this.fill.setSize(Math.round(this.border.width*this.cur/this.max),this.border.height)}}class r extends i{border;fill;max;cur;constructor(t){super(t),this.border=t.add.arc().setScrollFactor(0),this.fill=t.add.arc().setScrollFactor(0),this.deactivate(),this.max=1,this.cur=0,this.setDepth(0)}setPosition(t,e){this.border.setPosition(t,e),this.fill.setPosition(t,e)}setSize(t){this.border.setRadius(t),this.fill.setRadius(t),this.upd()}setColor(t){this.border.setStrokeStyle(this.border.lineWidth,t),this.fill.setFillStyle(t)}setBackColor(t,e){this.border.setFillStyle(t,e)}setLineWidth(t){this.border.setStrokeStyle(t,this.border.strokeColor)}setDepth(t){this.border.setDepth(t),this.fill.setDepth(t+1)}activate(){this.border.setActive(!0).setVisible(!0),this.fill.setActive(!0).setVisible(!0)}deactivate(){this.border.setActive(!1).setVisible(!1),this.fill.setActive(!1).setVisible(!1)}setMax(t){this.max=t,this.upd()}setCur(t){this.cur=t,this.upd()}destroy(){this.border.destroy(),this.fill.destroy()}upd(){let t=360*this.cur/this.max;this.fill.setStartAngle(2*t),this.fill.setEndAngle(3*t)}}class h extends i{text;rect;overBack;overText;outBack;outText;constructor(t,e){super(t),this.overBack=8947848,this.overText="#ffffff",this.outBack=5592405,this.outText="#ffffff",this.text=t.add.text(0,0,"").setOrigin(.5,.5).setScrollFactor(0),this.rect=t.add.rectangle().setOrigin(0,0).setScrollFactor(0),this.setDepth(0),this.rect.on("pointerdown",e),this.rect.on("pointerover",()=>{this.rect.setFillStyle(this.overBack),this.text.setColor(this.overText)}),this.rect.on("pointerout",()=>{this.rect.setFillStyle(this.outBack),this.text.setColor(this.outText)}),this.deactivate()}setPosition(t,e){this.rect.setPosition(t,e),this.text.setPosition(t+this.rect.width/2,e+this.rect.height/2),this.rect.setInteractive()}setSize(t,e){this.rect.setSize(t,e),this.text.setPosition(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2),this.rect.setInteractive()}setText(t){this.text.setText(t)}setDepth(t){this.rect.setDepth(t),this.text.setDepth(t+1)}activate(){this.rect.emit("pointerout"),this.rect.setActive(!0).setVisible(!0),this.text.setActive(!0).setVisible(!0)}deactivate(){this.rect.setActive(!1).setVisible(!1),this.text.setActive(!1).setVisible(!1)}defaults(){this.outBack=16711680,this.outText="#ffffff",this.overBack=65280,this.overText="#000000"}}},924:function(t,e,s){"use strict";s.r(e),s.d(e,{IterateUtils:function(){return r},SceneUtils:function(){return h}});var i=s("569"),a=s.n(i);class r{static iterateH(t,e,s){if((t=Math.abs(t))>(e=Math.abs(e))&&([t,e]=[e,t]),0==t){if(0==e){s(new a.Math.Vector2(0,0));return}s(new a.Math.Vector2(0,e)),s(new a.Math.Vector2(0,-e)),s(new a.Math.Vector2(e,0)),s(new a.Math.Vector2(-e,0));return}t==e?(s(new a.Math.Vector2(t,t)),s(new a.Math.Vector2(t,-t)),s(new a.Math.Vector2(-t,t)),s(new a.Math.Vector2(-t,-t))):(s(new a.Math.Vector2(t,e)),s(new a.Math.Vector2(t,-e)),s(new a.Math.Vector2(-t,e)),s(new a.Math.Vector2(-t,-e)),s(new a.Math.Vector2(e,t)),s(new a.Math.Vector2(e,-t)),s(new a.Math.Vector2(-e,t)),s(new a.Math.Vector2(-e,-t)))}static iterateX(t,e){if(0==(t=Math.abs(t))){e(new a.Math.Vector2(0,0));return}for(let s=-t+1;s<0;s++)e(new a.Math.Vector2(s,-t-s)),e(new a.Math.Vector2(s,t+s));for(let s=0;s<t;s++)e(new a.Math.Vector2(s,-t+s)),e(new a.Math.Vector2(s,t-s));e(new a.Math.Vector2(-t,0)),e(new a.Math.Vector2(t,0))}static iterateO(t,e,s){t=Math.abs(t),e=Math.abs(e);for(let i=-t;i<=t;i++)for(let t=-e;t<=e;t++)s(new a.Math.Vector2(i,t))}}class h{static launch(t){t.scene.launch(t),t.scene.bringToTop(t)}static remove(t){t.scene.remove(t)}static shutdown(t){t.scene.stop(t),t.scene.sendToBack(t)}static pause(t){t.scene.pause(t)}static resume(t){t.scene.resume(t)}}}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){return t&&t.__esModule?t.default:t},!function(){s.g.importScripts&&(t=s.g.location+"");var t,e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length){for(var a=i.length-1;a>-1&&!t;)t=i[a--].src}}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t}(),s("955")}();